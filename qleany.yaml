---
schema:
  version: 2
global:
  language: rust
  application_name: Qleany
  organisation:
    name: FernTech
    domain: eu.ferntech
  prefix_path: crates
entities:
- name: EntityBase
  only_for_heritage: true
  allow_direct_access: false
  fields:
  - name: id
    type: integer
  - name: created_at
    type: datetime
  - name: updated_at
    type: datetime
  undoable: false
- name: Root
  inherits_from: EntityBase
  allow_direct_access: false
  fields:
  - name: workspace
    type: entity
    entity: Workspace
    relationship: one_to_one
    optional: true
    strong: true
  - name: system
    type: entity
    entity: System
    relationship: one_to_one
    optional: true
    strong: true
  undoable: false
- name: Workspace
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: manifest_absolute_path
    type: string
  - name: global
    type: entity
    entity: Global
    relationship: one_to_one
    strong: true
  - name: entities
    type: entity
    entity: Entity
    relationship: ordered_one_to_many
    optional: true
    strong: true
    list_model: true
    list_model_displayed_field: name
  - name: features
    type: entity
    entity: Feature
    relationship: ordered_one_to_many
    optional: true
    strong: true
    list_model: true
    list_model_displayed_field: name
  - name: user_interface
    type: entity
    entity: UserInterface
    relationship: one_to_one
    strong: true
  undoable: true
- name: System
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: files
    type: entity
    entity: File
    relationship: one_to_many
    optional: true
    strong: true
    list_model: true
    list_model_displayed_field: name
  undoable: false
- name: Entity
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: name
    type: string
  - name: inherits_from
    type: entity
    entity: Entity
    relationship: many_to_one
    optional: true
  - name: only_for_heritage
    type: boolean
  - name: fields
    type: entity
    entity: Field
    relationship: ordered_one_to_many
    optional: true
    strong: true
    list_model: true
    list_model_displayed_field: name
  - name: relationships
    type: entity
    entity: Relationship
    relationship: one_to_many
    optional: true
    strong: true
  - name: single_model
    type: boolean
    strong: true
  - name: undoable
    type: boolean
  - name: allow_direct_access
    type: boolean
  undoable: true
- name: Field
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: name
    type: string
  - name: field_type
    type: enum
    enum_name: FieldType
    enum_values:
    - Boolean
    - Integer
    - UInteger
    - Float
    - String
    - Uuid
    - DateTime
    - Entity
    - Enum
  - name: entity
    type: entity
    entity: Entity
    relationship: many_to_one
    optional: true
  - name: relationship
    type: enum
    enum_name: FieldRelationshipType
    enum_values:
    - OneToOne
    - ManyToOne
    - OrderedOneToMany
    - OneToMany
    - ManyToMany
  - name: optional
    type: boolean
  - name: strong
    type: boolean
  - name: list_model
    type: boolean
  - name: list_model_displayed_field
    type: string
    optional: true
  undoable: true
- name: Feature
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: name
    type: string
  - name: use_cases
    type: entity
    entity: UseCase
    relationship: ordered_one_to_many
    optional: true
    strong: true
    list_model: true
    list_model_displayed_field: name
  undoable: true
- name: File
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: name
    type: string
  - name: path
    type: string
  - name: group
    type: string
  undoable: false
- name: UseCase
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: name
    type: string
  - name: validator
    type: boolean
  - name: entities
    type: entity
    entity: Entity
    relationship: ordered_one_to_many
    optional: true
    list_model: true
    list_model_displayed_field: name
  - name: undoable
    type: boolean
  - name: read_only
    type: boolean
  - name: long_operation
    type: boolean
  - name: dto_in
    type: entity
    entity: Dto
    relationship: one_to_one
    optional: true
    strong: true
  - name: dto_out
    type: entity
    entity: Dto
    relationship: one_to_one
    optional: true
    strong: true
  undoable: true
- name: Dto
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: name
    type: string
  - name: fields
    type: entity
    entity: DtoField
    relationship: ordered_one_to_many
    optional: true
    strong: true
    list_model: true
    list_model_displayed_field: name
  undoable: true
- name: DtoField
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: name
    type: string
  - name: field_type
    type: enum
    enum_name: DtoFieldType
    enum_values:
    - Boolean
    - Integer
    - UInteger
    - Float
    - String
    - Uuid
    - DateTime
    - Enum
  - name: optional
    type: boolean
  - name: is_list
    type: boolean
  - name: enum_name
    type: string
    optional: true
  - name: enum_values
    type: string
    optional: true
  undoable: true
- name: Global
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: language
    type: string
  - name: application_name
    type: string
  - name: organisation_name
    type: string
  - name: organisation_domain
    type: string
  - name: prefix_path
    type: string
  undoable: true
- name: Relationship
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: left_entity
    type: entity
    entity: Entity
    relationship: many_to_one
  - name: right_entity
    type: entity
    entity: Entity
    relationship: many_to_one
  - name: field_name
    type: string
  - name: relationship_type
    type: enum
    enum_name: RelationshipType
    enum_values:
    - OneToOne
    - ManyToOne
    - OneToMany
    - ManyToMany
  - name: strength
    type: enum
    enum_name: Strength
    enum_values:
    - Weak
    - Strong
  - name: direction
    type: enum
    enum_name: Direction
    enum_values:
    - Forward
    - Backward
  - name: cardinality
    type: enum
    enum_name: Cardinality
    enum_values:
    - ZeroOrOne
    - One
    - ZeroOrMore
    - OneOrMore
  - name: order
    type: enum
    optional: true
    enum_name: Order
    enum_values:
    - Ordered
    - Unordered
  undoable: true
- name: UserInterface
  inherits_from: EntityBase
  allow_direct_access: true
  fields:
  - name: rust_cli
    type: boolean
    strong: true
  - name: rust_slint
    type: boolean
    strong: true
  - name: cpp_qt_qtwidgets
    type: boolean
    strong: true
  - name: cpp_qt_qtquick
    type: boolean
    strong: true
  undoable: true
features:
- name: handling_app_lifecycle
  use_cases:
  - name: initialize_app
    validator: false
    entities:
    - Root
    undoable: false
  - name: clean_up_before_exit
    validator: false
    entities:
    - Root
    undoable: false
- name: handling_manifest
  use_cases:
  - name: load
    validator: true
    entities:
    - Root
    - Entity
    - Field
    - Feature
    - UseCase
    - Dto
    - DtoField
    - Global
    - Relationship
    undoable: false
    dto_in:
      name: LoadDto
      fields:
      - name: manifest_path
        type: string
    dto_out:
      name: LoadReturnDto
      fields:
      - name: workspace_id
        type: uinteger
      - name: manifest_path
        type: string
  - name: save
    validator: true
    entities:
    - Root
    - Entity
    - Field
    - Feature
    - UseCase
    - Dto
    - DtoField
    - Global
    - Relationship
    undoable: false
    dto_in:
      name: SaveDto
      fields:
      - name: manifest_path
        type: string
  - name: create
    validator: false
    entities:
    - Entity
    - Field
    - Global
    undoable: false
    dto_out:
      name: NewReturnDto
      fields:
      - name: workspace_id
        type: uinteger
  - name: close
    validator: false
    entities:
    - Root
    undoable: false
  - name: export_to_mermaid
    validator: false
    entities:
    - Entity
    undoable: false
    read_only: true
    dto_out:
      name: ExportToMermaidReturnDto
      fields:
      - name: mermaid_diagram
        type: string
- name: rust_file_generation
  use_cases:
  - name: list_rust_files
    validator: true
    entities:
    - Root
    - Entity
    - Feature
    - File
    - UseCase
    - Global
    - Relationship
    undoable: false
    dto_in:
      name: ListRustFilesDto
      fields:
      - name: only_list_already_existing
        type: boolean
    dto_out:
      name: ListRustFilesReturnDto
      fields:
      - name: file_ids
        type: uinteger
        is_list: true
      - name: file_names
        type: string
        is_list: true
      - name: file_groups
        type: string
        is_list: true
  - name: generate_rust_code
    validator: true
    entities:
    - Root
    - Entity
    - Feature
    - File
    - UseCase
    - Global
    - Relationship
    undoable: false
    read_only: true
    dto_in:
      name: GenerateRustCodeDto
      fields:
      - name: file_id
        type: uinteger
    dto_out:
      name: GenerateRustCodeReturnDto
      fields:
      - name: generated_code
        type: string
      - name: timestamp
        type: string
  - name: generate_rust_files
    validator: true
    entities:
    - Root
    - Entity
    - Field
    - Feature
    - File
    - UseCase
    - Dto
    - DtoField
    - Global
    - Relationship
    undoable: false
    read_only: true
    long_operation: true
    dto_in:
      name: GenerateRustFilesDto
      fields:
      - name: file_ids
        type: uinteger
        is_list: true
      - name: root_path
        type: string
      - name: prefix
        type: string
    dto_out:
      name: GenerateRustFilesReturnDto
      fields:
      - name: files
        type: string
        is_list: true
      - name: timestamp
        type: string
      - name: duration
        type: string
- name: cpp_qt_file_generation
  use_cases:
  - name: list_cpp_qt_files
    validator: true
    entities:
    - Root
    - Entity
    - Feature
    - File
    - UseCase
    - Global
    - Relationship
    undoable: false
    dto_in:
      name: ListCppQtFilesDto
      fields:
      - name: only_list_already_existing
        type: boolean
    dto_out:
      name: ListCppQtFilesReturnDto
      fields:
      - name: file_ids
        type: uinteger
        is_list: true
      - name: file_names
        type: string
        is_list: true
      - name: file_groups
        type: string
        is_list: true
  - name: generate_cpp_qt_code
    validator: true
    entities:
    - Root
    - Entity
    - Feature
    - File
    - UseCase
    - Global
    - Relationship
    undoable: false
    read_only: true
    dto_in:
      name: GenerateCppQtCodeDto
      fields:
      - name: file_id
        type: uinteger
    dto_out:
      name: GenerateCppQtCodeReturnDto
      fields:
      - name: generated_code
        type: string
      - name: timestamp
        type: string
  - name: generate_cpp_qt_files
    validator: true
    entities:
    - Root
    - Entity
    - Field
    - Feature
    - File
    - UseCase
    - Dto
    - DtoField
    - Global
    - Relationship
    undoable: false
    read_only: true
    long_operation: true
    dto_in:
      name: GenerateCppQtFilesDto
      fields:
      - name: file_ids
        type: uinteger
        is_list: true
      - name: root_path
        type: string
      - name: prefix
        type: string
    dto_out:
      name: GenerateCppQtFilesReturnDto
      fields:
      - name: files
        type: string
        is_list: true
      - name: timestamp
        type: string
      - name: duration
        type: string
ui:
  rust_cli: true
  rust_slint: true
