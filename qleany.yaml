---
schema:
  version: 2

global:
  language: python
  application_name: Qleany
  organisation:
    name: qleany
    domain: qleany.eu

entities:
  list:
    - name: EntityBase
      only_for_heritage: true
      fields:
        - name: id
          type: int
          
    - name: Entity
      parent: EntityBase
      fields:
        - name: name
          type: string
        - name: fields
          type: Field
          is_list: true
          ordered: true
          strong: true
          list_model: true
          list_model_displayed_field: name

    - name: Field
      parent: EntityBase
      fields:
        - name: name
          type: string
        - name: type
          type: string
        - name: is_list
          type: bool
        - name: single
          type: bool
        - name: strong
          type: bool
        - name: ordered
          type: bool

    - name: Feature
      parent: EntityBase
      fields:
        - name: name
          type: string
        - name: validator
          type: bool
        - name: use_cases
          type: UseCase
          is_list: true
          strong: true
          list_model: true
          list_model_displayed_field: name

    - name: UseCase
      parent: EntityBase
      fields:
        - name: name
          type: string
        - name: validator
          type: bool
        - name: undoable
          type: bool
        - name: dto_in
          type: Dto
          strong: true
        - name: dto_out
          type: Dto
          single: true
          strong: true
        - name: entities
          type: Entity
          is_list: true
          list_model: true
          list_model_displayed_field: name

    - name: Dto
      parent: EntityBase
      fields:
        - name: name
          type: string
        - name: fields
          type: DtoField
          is_list: true
          ordered: true
          strong: true
          list_model: true
          list_model_displayed_field: name

    - name: DtoField
      parent: EntityBase
      fields:
        - name: name
          type: string
        - name: type
          type: string
        - name: is_list
          type: bool

features:
  python_file_listing: 
    use_cases:
      list_direct_access_files:
        validator: true
        entities:
          - Entity
        undoable: false
        dto_in: 
          name: ListDirectAccessFilesDtoIn
          fields:
            - name: already_existing
              type: bool
        dto_out:
          name: ListDirectAccessFilesDtoOut
          fields:
            - name: files
              type: string
              is_list: true

      list_entity_files:
        validator: true
        entities:
          - Entity
        undoable: false
        dto_in: 
          name: ListEntityFilesDtoIn
          fields:
            - name: already_existing
              type: bool
        dto_out:
          name: ListEntityFilesDtoOut
          fields:
            - name: files
              type: string
              is_list: true
        
      list_feature_files:
        validator: true
        entities:
          - Feature
          - UseCase
          - Dto
        undoable: false
        dto_in: 
          name: ListFeatureFilesDtoIn
          fields:
            - name: already_existing
              type: bool
            - name: feature_name
              type: string
            - name: all_features
              type: bool
        dto_out:
          name: ListFeatureFilesDtoOut
          fields:
            - name: files
              type: string
              is_list: true
 
      list_persistence_files:
        validator: true
        entities:
          - Entity
        undoable: false
        dto_in: 
          name: ListPersistenceFilesDtoIn
          fields:
            - name: already_existing
              type: bool
        dto_out:
          name: ListPersistenceFilesDtoOut
          fields:
            - name: files
              type: string
              is_list: true
      
      list_common_base_files:
        validator: true
        undoable: false
        dto_in: 
          name: ListCommonBaseFilesDtoIn
          fields:
            - name: already_existing
              type: bool
        dto_out:
          name: ListCommonBaseFilesDtoOut
          fields:
            - name: files
              type: string
              is_list: true

      list_base_files:
        validator: true
        undoable: false
        dto_in: 
          name: ListBaseFilesDtoIn
          fields:
            - name: already_existing
              type: bool
        dto_out:
          name: ListBaseFilesDtoOut
          fields:
            - name: files
              type: string
              is_list: true
      
      list_ui_files:
        validator: true
        undoable: false
        dto_in: 
          name: ListUiFilesDtoIn
          fields:
            - name: already_existing
              type: bool
        dto_out:
          name: ListUiFilesDtoOut
          fields:
            - name: files
              type: string
              is_list: true

ui:
  cli: true