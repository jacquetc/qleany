import { Button } from "std-widgets.slint";

// Confirmation dialog component for unsaved changes warning
export component ConfirmationDialog inherits Rectangle {
    in property <string> message: "You have unsaved changes. Do you want to continue without saving?";
    callback accepted();
    callback rejected();

    // Semi-transparent background overlay
    background: #00000080;

    // Center the dialog
    Rectangle {
        x: (parent.width - self.width) / 2;
        y: (parent.height - self.height) / 2;
        z: 1;
        width: 400px;
        height: 180px;
        background: #ffffff;
        border-radius: 12px;
        drop-shadow-blur: 16px;
        drop-shadow-color: #00000040;
        drop-shadow-offset-y: 4px;

        VerticalLayout {
            padding: 24px;
            spacing: 16px;

            // Title
            Text {
                text: "Unsaved Changes";
                font-size: 18px;
                font-weight: 700;
                color: #212529;
                horizontal-alignment: center;
            }

            // Message
            Text {
                text: message;
                font-size: 14px;
                color: #495057;
                horizontal-alignment: center;
                wrap: word-wrap;
            }

            // Spacer
            Rectangle { vertical-stretch: 1; }

            // Buttons
            HorizontalLayout {
                spacing: 12px;
                alignment: center;

                Button {
                    text: "Cancel";
                    clicked => { 
                        root.rejected();
                    }
                }

                Button {
                    text: "Continue Without Saving";
                    primary: true;
                    clicked => { 
                        root.accepted();
                    }
                }
            }
        }
    }

    // Block clicks on the background
    TouchArea {
        clicked => { root.rejected(); }
    }
}
