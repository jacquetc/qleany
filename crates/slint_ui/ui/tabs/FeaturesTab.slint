import { VerticalBox, HorizontalBox, GroupBox, Button } from "std-widgets.slint";

export component FeaturesTab inherits Rectangle {
    // Models
    in-out property <[string]> feature_list;
    in-out property <[string]> use_case_list;

    // Selection indices (optional, -1 = none)
    in-out property <int> selected_feature_index;
    in-out property <int> selected_use_case_index;

    // Callbacks
    callback select_feature(int);
    callback select_use_case(int);

    background: #ffffff;

    HorizontalBox {
        padding: 8px;
        spacing: 8px;

        // Features list
        Rectangle { width: 260px; height: parent.height; background: #f6f6f6;
            VerticalBox { padding: 8px; spacing: 8px;
                Text { text: "Features"; font-size: 18px; font-weight: 600; }
                for name[i] in root.feature_list: Button {
                    text: name;
                    clicked => { root.select_feature(i); root.selected_feature_index = i; }
                }
            }
        }

        // Separator
        Rectangle { width: 1px; height: parent.height; background: #e0e0e0; }

        // Feature details + Use cases
        VerticalBox { spacing: 8px; padding: 8px;
            Text { text: root.selected_feature_index >= 0 ? ("Details for: " + root.feature_list[root.selected_feature_index]) : "Select a feature"; }
            GroupBox { title: "Use Cases";
                VerticalBox { spacing: 6px;
                    for uname[j] in root.use_case_list: Button {
                        text: uname;
                        clicked => { root.select_use_case(j); root.selected_use_case_index = j; }
                    }
                }
            }
        }

        // Separator
        Rectangle { width: 1px; height: parent.height; background: #e0e0e0; }

        // Use case details
        VerticalBox { spacing: 8px; padding: 8px;
            Text { text: root.selected_use_case_index >= 0 ? ("Use Case details for: " + root.use_case_list[root.selected_use_case_index]) : "Select a use case"; }
        }
    }
}