// Generated by Qleany. Edit at your own risk! Be careful when regenerating this file
// as changes will be lost.

use super::units_of_work::SystemUnitOfWorkFactory;
use super::{
    dtos::{CreateSystemDto, SystemDto},
    units_of_work::SystemUnitOfWorkROFactory,
    use_cases::{
        create_system_multi_uc::CreateSystemMultiUseCase, create_system_uc::CreateSystemUseCase,
        get_system_multi_uc::GetSystemMultiUseCase, get_system_uc::GetSystemUseCase,
        remove_system_multi_uc::RemoveSystemMultiUseCase, remove_system_uc::RemoveSystemUseCase,
        update_system_multi_uc::UpdateSystemMultiUseCase, update_system_uc::UpdateSystemUseCase,
    },
};
use anyhow::{Ok, Result};

use crate::SystemRelationshipDto;
use crate::system::use_cases::get_system_relationship_uc::GetSystemRelationshipUseCase;
use crate::system::use_cases::set_system_relationship_uc::SetSystemRelationshipUseCase;
use common::direct_access::system::SystemRelationshipField;

use common::{database::db_context::DbContext, event::EventHub, types::EntityId};
use std::sync::Arc;

pub fn create(
    db_context: &DbContext,
    event_hub: &Arc<EventHub>,
    entity: &CreateSystemDto,
) -> Result<SystemDto> {
    let uow_factory = SystemUnitOfWorkFactory::new(db_context, event_hub);
    let mut uc = CreateSystemUseCase::new(Box::new(uow_factory));
    let result = uc.execute(entity.clone())?;
    Ok(result)
}

pub fn get(db_context: &DbContext, id: &EntityId) -> Result<Option<SystemDto>> {
    let uow_factory = SystemUnitOfWorkROFactory::new(db_context);
    let uc = GetSystemUseCase::new(Box::new(uow_factory));
    uc.execute(id)
}

pub fn update(
    db_context: &DbContext,
    event_hub: &Arc<EventHub>,
    entity: &SystemDto,
) -> Result<SystemDto> {
    let uow_factory = SystemUnitOfWorkFactory::new(db_context, event_hub);
    let mut uc = UpdateSystemUseCase::new(Box::new(uow_factory));
    let result = uc.execute(entity)?;
    Ok(result)
}

pub fn remove(db_context: &DbContext, event_hub: &Arc<EventHub>, id: &EntityId) -> Result<()> {
    let uow_factory = SystemUnitOfWorkFactory::new(db_context, event_hub);
    let mut uc = RemoveSystemUseCase::new(Box::new(uow_factory));
    uc.execute(id)?;
    Ok(())
}

pub fn create_multi(
    db_context: &DbContext,
    event_hub: &Arc<EventHub>,
    entities: &[CreateSystemDto],
) -> Result<Vec<SystemDto>> {
    let uow_factory = SystemUnitOfWorkFactory::new(db_context, event_hub);
    let mut uc = CreateSystemMultiUseCase::new(Box::new(uow_factory));
    let result = uc.execute(entities)?;
    Ok(result)
}

pub fn get_multi(db_context: &DbContext, ids: &[EntityId]) -> Result<Vec<Option<SystemDto>>> {
    let uow_factory = SystemUnitOfWorkROFactory::new(db_context);
    let uc = GetSystemMultiUseCase::new(Box::new(uow_factory));
    uc.execute(ids)
}

pub fn update_multi(
    db_context: &DbContext,
    event_hub: &Arc<EventHub>,
    entities: &[SystemDto],
) -> Result<Vec<SystemDto>> {
    let uow_factory = SystemUnitOfWorkFactory::new(db_context, event_hub);
    let mut uc = UpdateSystemMultiUseCase::new(Box::new(uow_factory));
    let result = uc.execute(entities)?;
    Ok(result)
}

pub fn remove_multi(
    db_context: &DbContext,
    event_hub: &Arc<EventHub>,
    ids: &[EntityId],
) -> Result<()> {
    let uow_factory = SystemUnitOfWorkFactory::new(db_context, event_hub);
    let mut uc = RemoveSystemMultiUseCase::new(Box::new(uow_factory));
    uc.execute(ids)?;
    Ok(())
}

pub fn get_relationship(
    db_context: &DbContext,
    id: &EntityId,
    field: &SystemRelationshipField,
) -> Result<Vec<EntityId>> {
    let uow_factory = SystemUnitOfWorkROFactory::new(&db_context);
    let uc = GetSystemRelationshipUseCase::new(Box::new(uow_factory));
    uc.execute(id, field)
}

pub fn set_relationship(
    db_context: &DbContext,
    event_hub: &Arc<EventHub>,
    dto: &SystemRelationshipDto,
) -> Result<()> {
    let uow_factory = SystemUnitOfWorkFactory::new(db_context, event_hub);
    let mut uc = SetSystemRelationshipUseCase::new(Box::new(uow_factory));
    uc.execute(dto)?;
    Ok(())
}
